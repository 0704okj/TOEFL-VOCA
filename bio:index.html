<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="ko"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width,initial-scale=1" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;TOEFL Biology Vocab Matching&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>:root { --gap: 10px; --radius: 14px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f6f7fb; color:#111; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>header { padding: 18px 16px 8px; max-width: 1100px; margin: 0 auto; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>h1 { margin: 0 0 8px; font-size: 18px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.sub { display:flex; flex-wrap:wrap; gap:10px; align-items:center; font-size: 13px; color:#333; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.pill { background:#fff; border:1px solid #e7e7ef; border-radius:999px; padding:8px 10px; box-shadow: 0 1px 0 rgba(0,0,0,.03); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.wrap { max-width: 1100px; margin: 0 auto; padding: 0 16px 18px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.controls { display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin: 10px 0 14px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>button {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border: 1px solid #dcdcec; background:#fff; padding:10px 12px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 12px; cursor:pointer; font-weight:600;</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-shadow: 0 1px 0 rgba(0,0,0,.03);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:hover { filter: brightness(.98); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>button:active { transform: translateY(1px); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.grid { display:grid; grid-template-columns: 1fr 1fr; gap: var(--gap); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>@media (max-width: 820px) { .grid { grid-template-columns: 1fr; } }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.col {</p>
<p class="p1"><span class="Apple-converted-space">      </span>background:#fff; border:1px solid #e7e7ef; border-radius: var(--radius);</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 12px; box-shadow: 0 2px 10px rgba(0,0,0,.04);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.col h2 { margin: 2px 0 10px; font-size: 14px; color:#222; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.list { display:grid; grid-template-columns: 1fr; gap: 8px; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border:1px solid #ececf5; border-radius: 12px; padding: 10px 12px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background:#fafbff; cursor:pointer; user-select:none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>display:flex; justify-content:space-between; align-items:center; gap:12px;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card small { color:#666; font-weight:600; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card.selected { outline: 2px solid #4c7dff; background:#eef3ff; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card.matched { background:#ecfff1; border-color:#bfe7c8; color:#0b5b22; cursor:default; opacity:.95; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card.wrong { animation: shake .25s linear 0s 1; outline: 2px solid #ff4c4c; background:#ffecec; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes shake { 0%{transform:translateX(0)} 25%{transform:translateX(-3px)} 50%{transform:translateX(3px)} 75%{transform:translateX(-2px)} 100%{transform:translateX(0)} }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.footer { margin-top: 12px; font-size: 12px; color:#555; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.progress { height: 10px; background:#eef0f7; border-radius:999px; overflow:hidden; border:1px solid #e6e7f1; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.bar { height:100%; width:0%; background: linear-gradient(90deg,#4c7dff,#8a5bff); transition: width .2s ease; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.note { font-size: 12px; color:#666; margin-top: 6px; line-height: 1.4; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>code { background:#f0f1f7; padding:2px 6px; border-radius:8px; }</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;header&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;h1&gt;TOEFL Biology Vocab Matching Game&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="sub"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="pill"&gt;규칙: &lt;b&gt;왼쪽&lt;/b&gt; 하나 클릭 → &lt;b&gt;오른쪽&lt;/b&gt; 하나 클릭해서 매칭&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="pill"&gt;총 &lt;b id="totalCount"&gt;&lt;/b&gt;개&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="pill"&gt;맞춘 개수: &lt;b id="matchedCount"&gt;0&lt;/b&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="pill"&gt;시도: &lt;b id="tries"&gt;0&lt;/b&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="pill"&gt;시간: &lt;b id="time"&gt;00:00&lt;/b&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="wrap"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="controls"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button id="resetBtn"&gt;리셋(다시 섞기)&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button id="revealOneBtn"&gt;힌트 1개(정답 1쌍 자동 매칭)&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;button id="toggleModeBtn"&gt;모드 전환(한국어→영어)&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="progress" aria-label="progress"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="bar" id="bar"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="note"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>* 수정은 코드 아래쪽 &lt;code&gt;pairs&lt;/code&gt; 배열만 바꾸면 됩니다.</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="grid" style="margin-top: 12px;"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;section class="col"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2 id="leftTitle"&gt;English&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="list" id="leftList"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/section&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;section class="col"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2 id="rightTitle"&gt;한국어&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="list" id="rightList"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/section&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="footer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>파일로 저장 후 브라우저에서 열면 바로 실행됩니다. (예: &lt;code&gt;match_bio.html&lt;/code&gt;)</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>// ====== 단어 목록 (60쌍) ======</p>
<p class="p1"><span class="Apple-converted-space">  </span>const pairs = [</p>
<p class="p1"><span class="Apple-converted-space">    </span>["adaptation", "적응"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["natural selection", "자연선택"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["speciation", "종 분화"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["mutation", "돌연변이"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["relict", "잔존 생물(살아 있는 화석)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["superorganism", "초개체(생물의 군집)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["colonization", "군집 형성(정착)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["community", "군집"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["symbiosis", "공생"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["parasitism", "기생"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["parasite", "기생 생물(기생충)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["commensalism", "편리공생"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["mutualism", "상리공생"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["epiphyte", "착생 식물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["niche", "적소(생태적 지위)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["flora", "식물군"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["fauna", "동물군"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["biomass", "생물량"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["food web", "먹이 그물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["biological clock", "생체 시계"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["circadian", "일주(24시간) 주기의"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["cell division", "세포 분열"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["reproduction", "생식/번식"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["offspring", "새끼/자손"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["dormancy", "휴면(비활동 상태)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["organism", "유기체/생물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["microorganism", "미생물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["fungus", "곰팡이류"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["bacteria", "박테리아/세균"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["paleontology", "고생물학"],</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>["mammal", "포유동물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["cetacean", "고래목 동물(고래류)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["ruminant", "반추동물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["tusk", "엄니"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["avian", "조류의"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["plumage", "(새의) 깃털"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["reptile", "파충류"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["venom", "(뱀 등의) 독"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["amphibian", "양서류"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["gill", "(물고기의) 아가미"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["fin", "(물고기의) 지느러미"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["rodent", "설치류"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["invertebrate", "무척추동물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["arthropod", "절지동물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["mollusk", "연체동물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["bivalve", "쌍각류(조개류)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["mate", "(새·동물의) 짝"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["courtship", "(짝짓기를 위한) 구애"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["breed", "새끼를 낳다/사육하다/품종"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["fertilization", "수정"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["hatchling", "갓 부화한 새끼"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["feeding habit", "먹이섭취 습성"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["scavenger", "청소동물(죽은 동물 먹는)"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["prey", "먹이/사냥감"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["bottom feeder", "바닥에서 먹이 찾는 물고기"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["endotherm", "온혈동물"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["hibernation", "(동물의) 겨울잠"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["migration", "(동물·철새의) 이주/이동"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["vocalization", "(동물의) 발성/소리"],</p>
<p class="p1"><span class="Apple-converted-space">    </span>["echolocation", "반향정위"]</p>
<p class="p1"><span class="Apple-converted-space">  </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const $ = (id) =&gt; document.getElementById(id);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>const shuffle = (arr) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const a = arr.slice();</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let i = a.length - 1; i &gt; 0; i--) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const j = Math.floor(Math.random() * (i + 1));</p>
<p class="p1"><span class="Apple-converted-space">      </span>[a[i], a[j]] = [a[j], a[i]];</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>return a;</p>
<p class="p1"><span class="Apple-converted-space">  </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function escapeHtml(s) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>return String(s)</p>
<p class="p1"><span class="Apple-converted-space">      </span>.replaceAll("&amp;", "&amp;amp;")</p>
<p class="p1"><span class="Apple-converted-space">      </span>.replaceAll("&lt;", "&amp;lt;")</p>
<p class="p1"><span class="Apple-converted-space">      </span>.replaceAll("&gt;", "&amp;gt;")</p>
<p class="p1"><span class="Apple-converted-space">      </span>.replaceAll('"', "&amp;quot;")</p>
<p class="p1"><span class="Apple-converted-space">      </span>.replaceAll("'", "&amp;#039;");</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// ====== 상태 ======</p>
<p class="p1"><span class="Apple-converted-space">  </span>let mode = "EN_KO"; // EN_KO or KO_EN</p>
<p class="p1"><span class="Apple-converted-space">  </span>let leftSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>let rightSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>let matched = new Set(); // english key</p>
<p class="p1"><span class="Apple-converted-space">  </span>let tries = 0;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>// timer</p>
<p class="p1"><span class="Apple-converted-space">  </span>let startAt = null;</p>
<p class="p1"><span class="Apple-converted-space">  </span>let timerId = null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function formatTime(ms) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const total = Math.floor(ms / 1000);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const m = String(Math.floor(total / 60)).padStart(2, "0");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const s = String(total % 60).padStart(2, "0");</p>
<p class="p1"><span class="Apple-converted-space">    </span>return `${m}:${s}`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function startTimerIfNeeded() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (timerId) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>startAt = Date.now();</p>
<p class="p1"><span class="Apple-converted-space">    </span>timerId = setInterval(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>$("time").textContent = formatTime(Date.now() - startAt);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}, 250);</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function stopTimerIfDone() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (matched.size === pairs.length &amp;&amp; timerId) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>clearInterval(timerId);</p>
<p class="p1"><span class="Apple-converted-space">      </span>timerId = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function getLists() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (mode === "EN_KO") {</p>
<p class="p1"><span class="Apple-converted-space">      </span>return {</p>
<p class="p1"><span class="Apple-converted-space">        </span>leftTitle: "English",</p>
<p class="p1"><span class="Apple-converted-space">        </span>rightTitle: "한국어",</p>
<p class="p1"><span class="Apple-converted-space">        </span>left: pairs.map(p =&gt; ({ id: p[0], text: p[0] })),</p>
<p class="p1"><span class="Apple-converted-space">        </span>right: pairs.map(p =&gt; ({ id: p[0], text: p[1] }))</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>return {</p>
<p class="p1"><span class="Apple-converted-space">      </span>leftTitle: "한국어",</p>
<p class="p1"><span class="Apple-converted-space">      </span>rightTitle: "English",</p>
<p class="p1"><span class="Apple-converted-space">      </span>left: pairs.map(p =&gt; ({ id: p[0], text: p[1] })),</p>
<p class="p1"><span class="Apple-converted-space">      </span>right: pairs.map(p =&gt; ({ id: p[0], text: p[0] }))</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function updateHUD() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("totalCount").textContent = String(pairs.length);</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("matchedCount").textContent = String(matched.size);</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("tries").textContent = String(tries);</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("bar").style.width = `${(matched.size / pairs.length) * 100}%`;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function makeCard(item, side) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const div = document.createElement("div");</p>
<p class="p1"><span class="Apple-converted-space">    </span>div.className = "card";</p>
<p class="p1"><span class="Apple-converted-space">    </span>div.dataset.side = side;</p>
<p class="p1"><span class="Apple-converted-space">    </span>div.dataset.id = item.id; // english key</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>div.innerHTML = `&lt;span&gt;${escapeHtml(item.text)}&lt;/span&gt;&lt;small&gt;${side === "left" ? "" : ""}&lt;/small&gt;`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (matched.has(item.id)) div.classList.add("matched");</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>div.addEventListener("click", () =&gt; onPick(div));</p>
<p class="p1"><span class="Apple-converted-space">    </span>return div;</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function render() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const { leftTitle, rightTitle, left, right } = getLists();</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("leftTitle").textContent = leftTitle;</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("rightTitle").textContent = rightTitle;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const leftList = $("leftList");</p>
<p class="p1"><span class="Apple-converted-space">    </span>const rightList = $("rightList");</p>
<p class="p1"><span class="Apple-converted-space">    </span>leftList.innerHTML = "";</p>
<p class="p1"><span class="Apple-converted-space">    </span>rightList.innerHTML = "";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>leftSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>rightSelected = null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>for (const item of shuffle(left)) leftList.appendChild(makeCard(item, "left"));</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (const item of shuffle(right)) rightList.appendChild(makeCard(item, "right"));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>updateHUD();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function markMatched(id) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>document.querySelectorAll(`.card[data-id="${CSS.escape(id)}"]`).forEach(el =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.classList.remove("selected");</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.classList.add("matched");</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function onPick(el) {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const side = el.dataset.side;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const id = el.dataset.id;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (matched.has(id)) return;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>startTimerIfNeeded();</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (side === "left") {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (leftSelected) leftSelected.classList.remove("selected");</p>
<p class="p1"><span class="Apple-converted-space">      </span>leftSelected = el;</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.classList.add("selected");</p>
<p class="p1"><span class="Apple-converted-space">    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (rightSelected) rightSelected.classList.remove("selected");</p>
<p class="p1"><span class="Apple-converted-space">      </span>rightSelected = el;</p>
<p class="p1"><span class="Apple-converted-space">      </span>el.classList.add("selected");</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (leftSelected &amp;&amp; rightSelected) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>tries += 1;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const leftId = leftSelected.dataset.id;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const rightId = rightSelected.dataset.id;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (leftId === rightId) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>matched.add(leftId);</p>
<p class="p1"><span class="Apple-converted-space">        </span>markMatched(leftId);</p>
<p class="p1"><span class="Apple-converted-space">        </span>leftSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>rightSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateHUD();</p>
<p class="p1"><span class="Apple-converted-space">        </span>stopTimerIfDone();</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>leftSelected.classList.add("wrong");</p>
<p class="p1"><span class="Apple-converted-space">        </span>rightSelected.classList.add("wrong");</p>
<p class="p1"><span class="Apple-converted-space">        </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">          </span>leftSelected?.classList.remove("wrong", "selected");</p>
<p class="p1"><span class="Apple-converted-space">          </span>rightSelected?.classList.remove("wrong", "selected");</p>
<p class="p1"><span class="Apple-converted-space">          </span>leftSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">          </span>rightSelected = null;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}, 260);</p>
<p class="p1"><span class="Apple-converted-space">        </span>updateHUD();</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function revealOne() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>const remaining = pairs.map(p =&gt; p[0]).filter(id =&gt; !matched.has(id));</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (remaining.length === 0) return;</p>
<p class="p1"><span class="Apple-converted-space">    </span>startTimerIfNeeded();</p>
<p class="p1"><span class="Apple-converted-space">    </span>const id = remaining[Math.floor(Math.random() * remaining.length)];</p>
<p class="p1"><span class="Apple-converted-space">    </span>tries += 1;</p>
<p class="p1"><span class="Apple-converted-space">    </span>matched.add(id);</p>
<p class="p1"><span class="Apple-converted-space">    </span>markMatched(id);</p>
<p class="p1"><span class="Apple-converted-space">    </span>updateHUD();</p>
<p class="p1"><span class="Apple-converted-space">    </span>stopTimerIfDone();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function resetAll() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>matched = new Set();</p>
<p class="p1"><span class="Apple-converted-space">    </span>tries = 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>$("time").textContent = "00:00";</p>
<p class="p1"><span class="Apple-converted-space">    </span>if (timerId) { clearInterval(timerId); timerId = null; }</p>
<p class="p1"><span class="Apple-converted-space">    </span>startAt = null;</p>
<p class="p1"><span class="Apple-converted-space">    </span>render();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>function toggleMode() {</p>
<p class="p1"><span class="Apple-converted-space">    </span>mode = (mode === "EN_KO") ? "KO_EN" : "EN_KO";</p>
<p class="p1"><span class="Apple-converted-space">    </span>render();</p>
<p class="p1"><span class="Apple-converted-space">  </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>$("resetBtn").addEventListener("click", resetAll);</p>
<p class="p1"><span class="Apple-converted-space">  </span>$("revealOneBtn").addEventListener("click", revealOne);</p>
<p class="p1"><span class="Apple-converted-space">  </span>$("toggleModeBtn").addEventListener("click", toggleMode);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>render();</p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
